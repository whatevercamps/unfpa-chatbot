{"version":3,"sources":["Components/VoiceRecorder.js","Components/InputMessage.js","Components/Message.js","Components/OptionsMessage.js","Components/Conversation.js","Components/secondPhase.js","Components/thirdPhase.js","Components/finalPhase.js","Components/firstPhase.js","App.js","reportWebVitals.js","index.js"],"names":["VoiceRecorder","voiceNote","classes","recording","setRecording","setAudioMessage","sendAudioMessage","useRef","useState","items","setItems","recorder","setRecorder","preRecording","setPreRecording","recDuration","setRecDuration","recMinutes","setRecMinutes","recSeconds","setRecSeconds","recDurationInterval","setRecDurationInterval","useEffect","setInterval","rD","clearInterval","startRecord","Math","floor","start","navigator","mediaDevices","getUserMedia","audio","then","stream","MediaRecorder","ondataavailable","e","i","data","length","className","InputBase","input","value","disabled","inputProps","Divider","divider","orientation","IconButton","iconButton","aria-label","onClick","stop","blob","Blob","type","reader","window","FileReader","readAsDataURL","onloadend","base64","result","split","style","color","useStyles","makeStyles","theme","root","padding","display","alignItems","width","marginLeft","spacing","flex","height","margin","InputMessage","props","setInput","audioMessage","Paper","component","onSubmit","evt","preventDefault","finish","onChange","target","placeholder","notAllowedToRecord","Message","setMessageInput","customClickEvent","message","sender","nextMessage","text","handleSubmit","OptionsMessage","Row","options","map","option","index","Col","lg","round","Conversation","refForScroll","userAge","setUserAge","userGender","setUserGender","userName","setUserName","sessionId","setSessionId","messages","setMessages","sendWatsonMessage","sId","console","log","payload","userAgeMin","userAgeMax","JSON","stringify","fetch","method","headers","session_id","Accept","body","response","status","json","Error","responseJson","output","generic","watsonResponse","presendWatsonMessage","addMessages","catch","error","mss","tempMss","pop","getSessionId","err","Promise","resolve","reject","tempInitialMessages","time","setTimeout","initialMessages","shift","m","random","current","scrollIntoView","behavior","endPhase","secondPhase","gender","thirdPhase","name","finalPhase","firstPhase","age","Container","xs","offset","span","sm","ref","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2ce7b998.chunk.js","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Divider from \"@material-ui/core/Divider\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport KeyboardVoiceIcon from \"@material-ui/icons/KeyboardVoice\";\n\nexport default function VoiceRecorder({\n  voiceNote,\n  classes,\n  recording,\n  setRecording,\n  setAudioMessage,\n  sendAudioMessage,\n}) {\n  const audioRef = useRef();\n  const [items, setItems] = useState([]);\n  const [recorder, setRecorder] = useState(null);\n  const [preRecording, setPreRecording] = useState(false);\n  const [recDuration, setRecDuration] = useState(0);\n  const [recMinutes, setRecMinutes] = useState(0);\n  const [recSeconds, setRecSeconds] = useState(0);\n  const [recDurationInterval, setRecDurationInterval] = useState(null);\n\n  const initRecorder = () => {\n    const device = navigator.mediaDevices.getUserMedia({ audio: true });\n\n    device.then((stream) => {\n      let recorder = new MediaRecorder(stream);\n      recorder.ondataavailable = (e) => {\n        setItems((i) => [...i, e.data]);\n      };\n\n      setRecorder(recorder);\n    });\n  };\n\n  useEffect(() => {\n    if (recording) {\n      setRecDurationInterval(\n        setInterval(() => {\n          setRecDuration((rD) => rD + 1);\n        }, 1000)\n      );\n    } else if (recDurationInterval) {\n      clearInterval(recDurationInterval);\n      setRecDurationInterval(null);\n    }\n  }, [recording]);\n\n  useEffect(() => {\n    if (preRecording) {\n      setPreRecording(false);\n      startRecord();\n    }\n  }, [recorder]);\n\n  useEffect(() => {\n    if (recDuration) {\n      setRecMinutes(Math.floor(recDuration / 60));\n      setRecSeconds(Math.floor(recDuration % 60));\n    } else {\n      setRecMinutes(0);\n      setRecSeconds(0);\n    }\n  }, [recDuration]);\n\n  const startRecord = () => {\n    if (recorder) {\n      setRecording(true);\n      recorder.start(100);\n    } else {\n      setPreRecording(true);\n      initRecorder();\n    }\n  };\n\n  const stopRecord = () => {\n    if (recorder) {\n      recorder.stop();\n      setAudioMessage(items);\n      setRecording(false);\n    }\n  };\n\n  const preSendAudioMessage = () => {\n    if (!recording && items.length) {\n      const blob = new Blob(items, { type: \"audio/webm\" });\n\n      const reader = new window.FileReader();\n      reader.readAsDataURL(blob);\n      reader.onloadend = () => {\n        const base64 = reader.result;\n\n        sendAudioMessage({ type: \"audio/webm\", data: base64.split(\",\")[1] });\n      };\n    }\n  };\n\n  if (voiceNote) {\n    return (\n      <>\n        {(recording || items.length > 0) && (\n          <div className='text-center centerText'>\n            {recording && (\n              <InputBase\n                className={classes.input}\n                value={`Escuchando 👂🏻 ${\n                  recMinutes / 10 < 1 ? \"0\" : \"\"\n                }${recMinutes}:${recSeconds / 10 < 1 ? \"0\" : \"\"}${recSeconds}`}\n                disabled\n                inputProps={{ \"aria-label\": \"jeje\" }}\n              />\n            )}\n            {!recording && items.length > 0 && (\n              <InputBase\n                className={classes.input}\n                value={`Envíamos tu audio? 🤓  ${\n                  recMinutes / 10 < 1 ? \"0\" : \"\"\n                }${recMinutes}:${recSeconds / 10 < 1 ? \"0\" : \"\"}${recSeconds}`}\n                disabled\n                inputProps={{ \"aria-label\": \"jeje\" }}\n              />\n            )}\n          </div>\n        )}\n        {(recording || items.length > 0) && (\n          <Divider className={classes.divider} orientation='vertical' />\n        )}\n\n        <IconButton\n          className={classes.iconButton}\n          aria-label='directions'\n          onClick={\n            recording\n              ? stopRecord\n              : items.length > 0\n              ? preSendAudioMessage\n              : startRecord\n          }\n        >\n          {recording || items.length === 0 ? (\n            <KeyboardVoiceIcon\n              style={\n                !recording\n                  ? { color: \"hsl(346,76%,77%)\" }\n                  : { color: \"hsl(346,76%,95%)\" }\n              }\n            />\n          ) : (\n            <SendIcon style={{ color: \"hsl(346,76%,77%)\" }} />\n          )}\n        </IconButton>\n      </>\n    );\n  }\n  return <div className='VoiceRecorder'></div>;\n}\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport VoiceRecorder from \"./VoiceRecorder\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: \"2px 4px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"100%\",\n  },\n  input: {\n    marginLeft: theme.spacing(1),\n    flex: 1,\n  },\n  iconButton: {\n    padding: 10,\n  },\n  divider: {\n    height: 28,\n    margin: 4,\n  },\n}));\n\nexport default function InputMessage(props) {\n  const [input, setInput] = useState(\"\");\n  const [recording, setRecording] = useState(false);\n  const [audioMessage, setAudioMessage] = useState(null);\n\n  const classes = useStyles();\n\n  return (\n    <Paper\n      component='form'\n      className={classes.root}\n      onSubmit={(evt) => {\n        if (input.split(\"\").length) {\n          evt.preventDefault();\n          props.finish(input);\n        }\n      }}\n    >\n      {!recording && !audioMessage && (\n        <InputBase\n          className={classes.input}\n          onChange={(evt) => setInput(evt.target.value)}\n          value={input}\n          placeholder={props.input.placeholder}\n          inputProps={{ \"aria-label\": props.input.placeholder }}\n        />\n      )}\n      {!recording && !audioMessage && (\n        <Divider className={classes.divider} orientation='vertical' />\n      )}\n      {input.length === 0 && !props.input.notAllowedToRecord ? (\n        <VoiceRecorder\n          voiceNote={true}\n          classes={classes}\n          recording={recording}\n          setRecording={setRecording}\n          setAudioMessage={setAudioMessage}\n          sendAudioMessage={props.finish}\n        />\n      ) : (\n        <IconButton\n          disabled={input.split(\"\").length <= 0}\n          type='submit'\n          className={classes.iconButton}\n          aria-label='directions'\n        >\n          <SendIcon\n            // color={!input.split(\"\").length && \"disabled\"}\n            style={\n              input.split(\"\").length > 0\n                ? { color: \"hsl(346,76%,77%)\" }\n                : { color: \"hsl(346,76%,95%)\" }\n            }\n          />\n        </IconButton>\n      )}\n    </Paper>\n  );\n}\n","import React from \"react\";\n\nimport InputMessage from \"./InputMessage\";\n\nexport default function Message(props, { setMessageInput }) {\n  return (\n    <div\n      onClick={\n        props.customClickEvent ? () => props.customClickEvent() : () => true\n      }\n      className={\n        (props.message.sender === \"bot\"\n          ? \"Message bot scale-up-tl\"\n          : \"Message user scale-up-tr\") +\n        (!props.nextMessage || props.nextMessage.sender !== props.message.sender\n          ? \" final\"\n          : \"\") +\n        (props.customClickEvent ? \" clickable\" : \"\")\n      }\n    >\n      {props.message.text ||\n        (props.message.input && (\n          <InputMessage\n            input={props.message.input}\n            finish={(input) => {\n              props.message.input.handleSubmit(input);\n            }}\n          />\n        ))}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Container, Row, Col } from \"react-bootstrap\";\n\nimport Message from \"./Message\";\n\nexport default function OptionsMessage(props) {\n  return (\n    <div className='OptionsMessage'>\n      <Row>\n        {props.options.map((option, index) => {\n          return (\n            <Col key={index} lg={Math.round(12 / (props.options.length || 1))}>\n              <Message\n                customClickEvent={option.onClick}\n                message={option.message}\n                nextMessage={props.nextMessage}\n              />\n            </Col>\n          );\n        })}\n      </Row>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Container, Row, Col } from \"react-bootstrap\";\n\nimport Message from \"./Message\";\nimport OptionsMessage from \"./OptionsMessage\";\nimport firstPhase from \"./firstPhase\";\nimport secondPhase from \"./secondPhase\";\nimport thirdPhase from \"./thirdPhase\";\nimport finalPhase from \"./finalPhase\";\n\nexport default function Conversation() {\n  const refForScroll = useRef();\n\n  const [userAge, setUserAge] = useState(null);\n  const [userGender, setUserGender] = useState(null);\n  const [userName, setUserName] = useState(null);\n\n  const [sessionId, setSessionId] = useState(null);\n  const [messages, setMessages] = useState([]);\n\n  const sendWatsonMessage = (sId, message) => {\n    console.log(\"session = \", sId);\n    console.log(\"w message\", message);\n\n    const payload = {\n      message: message,\n      userName: userName,\n      userAgeMin: userAge[0],\n      userAgeMax: userAge[1],\n      userGender: userGender,\n    };\n\n    console.log(\"payload\", payload, JSON.stringify(payload));\n\n    fetch(\"/api/watson/message\", {\n      method: \"POST\",\n      headers: {\n        session_id: sId,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(payload),\n    })\n      .then((response) => {\n        if (response.status === 200) return response.json();\n        throw new Error(\"failed getting watson api response\");\n      })\n      .then((responseJson) => {\n        if (\n          responseJson &&\n          responseJson.output &&\n          responseJson.output.generic &&\n          responseJson.output.generic.length\n        ) {\n          const messages = [\n            ...responseJson.output.generic.map((watsonResponse) => {\n              return {\n                sender: \"bot\",\n                text: watsonResponse.text,\n              };\n            }),\n            {\n              sender: \"user\",\n              input: {\n                handleSubmit: presendWatsonMessage,\n                placeholder: \"ingresa aquí tu respuesta\",\n              },\n            },\n          ];\n          addMessages(messages);\n        } else {\n          throw new Error(\"failed getting watson message response\");\n        }\n      })\n      .catch((error) => {\n        console.log(\"login error\", error);\n        return false;\n      });\n  };\n\n  const presendWatsonMessage = (message) => {\n    console.log(\"message\", message);\n    setMessages((mss) => {\n      let tempMss = mss.pop();\n\n      tempMss = [\n        ...mss,\n        {\n          ...tempMss,\n          text:\n            message.type && message.type === \"audio/webm\"\n              ? \"Nota de voz 🔈\"\n              : message,\n        },\n      ];\n      console.log(\"mss\", tempMss);\n      return tempMss;\n    });\n    if (sessionId) {\n      sendWatsonMessage(sessionId, message);\n    } else {\n      getSessionId()\n        .then((sId) => {\n          console.log(\"obtuve un nuevo promise sId\", sId);\n          sendWatsonMessage(sId, message);\n        })\n        .catch((err) => console.log(\"error\", err));\n    }\n  };\n\n  const getSessionId = () => {\n    return new Promise((resolve, reject) => {\n      fetch(\"/api/watson/session\", {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      })\n        .then((response) => {\n          if (response.status === 200) return response.json();\n          throw new Error(\"failed getting watson api response\");\n        })\n        .then((responseJson) => {\n          if (responseJson && responseJson.session_id) {\n            setSessionId(responseJson.session_id);\n            console.log(\"sesssion creada\", responseJson.session_id);\n            resolve(responseJson.session_id);\n          } else {\n            throw new Error(\"failed getting watson session id\");\n          }\n        })\n        .catch((error) => {\n          console.log(\"login error\", error);\n          reject(false);\n        });\n    });\n  };\n\n  const addMessages = (tempInitialMessages, time) => {\n    setTimeout(() => {\n      let initialMessages = [...tempInitialMessages];\n\n      if (initialMessages && initialMessages.length) {\n        const message = initialMessages.shift();\n\n        if (message) {\n          setMessages((m) => [...m, message]);\n        }\n\n        return addMessages(initialMessages);\n      }\n      return true;\n    }, time || 1000 + Math.floor(Math.random() * (800 - 300) + 300));\n    // }, 1);\n  };\n\n  useEffect(() => {\n    if (refForScroll)\n      refForScroll.current.scrollIntoView({ behavior: \"smooth\" });\n  }, [refForScroll, messages]);\n\n  useEffect(() => {\n    if (userAge && userAge.length) {\n      secondPhase(addMessages, userAge, (gender) => {\n        setUserGender(gender);\n      });\n    }\n  }, [userAge]);\n\n  useEffect(() => {\n    if (userAge && userAge.length && userGender) {\n      thirdPhase(addMessages, userAge, userGender, (name) => {\n        if (name) {\n          setMessages((mss) => {\n            let tempMss = mss.pop();\n\n            tempMss = [...mss, { ...tempMss, text: name }];\n            console.log(\"mss\", tempMss);\n            return tempMss;\n          });\n          setUserName(`, ${name},`);\n        } else {\n          setUserName(\",\");\n        }\n      });\n    }\n  }, [userGender]);\n\n  useEffect(() => {\n    if (userAge && userAge.length && userGender && userName) {\n      finalPhase(\n        addMessages,\n        userAge,\n        userGender,\n        userName,\n        presendWatsonMessage\n      );\n    }\n  }, [userName]);\n\n  useEffect(() => {\n    firstPhase(addMessages, setMessages, (age) => {\n      setUserAge(age);\n    });\n  }, []);\n\n  return (\n    <Container className='Conversation'>\n      {messages &&\n        messages.length &&\n        messages.map((message, index) => (\n          <Row key={index}>\n            <Col\n              xs={message.sender === \"bot\" ? 9 : { offset: 1, span: 9 }}\n              sm={\n                message.sender === \"bot\"\n                  ? 6\n                  : message.options && message.options.length >= 4\n                  ? { offset: 4, span: 8 }\n                  : message.options && message.options.length >= 2\n                  ? { offset: 6, span: 6 }\n                  : { offset: 8, span: 4 }\n              }\n            >\n              {message.options ? (\n                <OptionsMessage\n                  options={message.options}\n                  nextMessage={messages[index + 1]}\n                />\n              ) : (\n                <Message message={message} nextMessage={messages[index + 1]} />\n              )}\n            </Col>\n          </Row>\n        ))}\n      <div ref={refForScroll}></div>\n    </Container>\n  );\n}\n","export default function secondPhase(addMessages, userAge, endPhase) {\n  let initialMessages = [\n    {\n      sender: \"bot\",\n      text: userAge[1] <= 18 ? \"Ah, eres bastante joven... genial!\" : \"Genial!\",\n    },\n    {\n      sender: \"bot\",\n      text: \"🤓 sigamos! \",\n    },\n    {\n      sender: \"bot\",\n      text:\n        \"Obviamente todos somos únicos 💖... pero en este caso necesito saber si te consideras hombre, mujer, o de otro género...\",\n    },\n    {\n      sender: \"user\",\n      options: [\n        {\n          message: {\n            sender: \"user\",\n            text: \"hombre 🧝🏼\",\n          },\n          onClick: () => endPhase(\"hombre\"),\n        },\n        {\n          message: {\n            sender: \"user\",\n            text: \"mujer 🧝🏻‍♀️\",\n          },\n          onClick: () => endPhase(\"mujer\"),\n        },\n        {\n          message: {\n            sender: \"user\",\n            text: \"nah, las etiquetas no son lo mío 🧝🏻‍♂️\",\n          },\n          onClick: () => endPhase(\"otro\"),\n        },\n      ],\n    },\n  ];\n\n  addMessages(initialMessages, 50);\n}\n","export default function thirdPhase(addMessages, userAge, userGender, endPhase) {\n  let initialMessages = [\n    {\n      sender: \"bot\",\n      text:\n        \"Oye, ¿y te gustaría que te llame de alguna manera o lo dejamos así?\",\n    },\n    {\n      sender: \"user\",\n      options: [\n        {\n          message: {\n            sender: \"user\",\n            text: \"See 😎\",\n          },\n          onClick: () =>\n            addMessages([\n              {\n                sender: \"bot\",\n                text:\n                  \"Genial! Dime, ¿cómo quieres que te llame durante nuestra charla?\",\n              },\n              {\n                sender: \"user\",\n                input: {\n                  notAllowedToRecord: true,\n                  handleSubmit: endPhase,\n                  placeholder: \"pon aquí tu nombre\",\n                },\n              },\n            ]),\n        },\n        {\n          message: {\n            sender: \"user\",\n            text: \"Nah 😅\",\n          },\n          onClick: () => endPhase(),\n        },\n      ],\n    },\n  ];\n\n  addMessages(initialMessages, 50);\n}\n","export default function finalPhase(\n  addMessages,\n  userAge,\n  userGender,\n  userName,\n  sendWatsonMessage\n) {\n  let initialMessages = [\n    {\n      sender: \"bot\",\n      text: `Ahora si ${userName} ¡empecemos a divertirnos!`,\n    },\n    {\n      sender: \"bot\",\n      text: \"Cuéntame, ¿en qué puedo ayudarte?\",\n    },\n    {\n      sender: \"user\",\n      input: {\n        handleSubmit: sendWatsonMessage,\n        placeholder: \"puedes contarme lo que sea\",\n      },\n    },\n  ];\n\n  addMessages(initialMessages, 50);\n}\n","export default function firstPhase(addMessages, setMessages, endPhase) {\n  setMessages([]);\n  let initialMessages = [\n    {\n      sender: \"bot\",\n      text: \"Hola, soy C418 🤖.\",\n    },\n    {\n      sender: \"bot\",\n      text:\n        \"Me crearon para atender las necesidades que puedieras tener acerca de prácticamente cualquier cosa relacionada a UNFPA.\",\n    },\n    {\n      sender: \"user\",\n      options: [\n        {\n          onClick: () =>\n            addMessages(\n              [\n                {\n                  sender: \"bot\",\n                  text:\n                    \"Claro, me crearon en el grupo de Innovación del UNFPA. Todos ellos buscan que pueda incentivar la opinión colectiva de los jóvenes al rededor de la innovación y, a la vez, proteger los derechos de las mujeres, hombres, y niños que lo necesiten.\",\n                },\n                {\n                  sender: \"user\",\n                  options: [\n                    {\n                      onClick: () =>\n                        addMessages(\n                          [\n                            {\n                              sender: \"bot\",\n                              text:\n                                \"Gracias! Antes de empezar debes saber que Esta conversación es confidencial, no recogo ningún dato personal sobre ti.\",\n                            },\n                            {\n                              sender: \"user\",\n                              options: [\n                                {\n                                  onClick: () =>\n                                    addMessages(\n                                      [\n                                        {\n                                          sender: \"bot\",\n                                          text:\n                                            \"Bueno, empecemos por saber tu edad.\",\n                                        },\n                                        {\n                                          sender: \"bot\",\n                                          text:\n                                            \"Te prometo que ya casi terminamos la parte aburrida, pero necesito saber algunas cosas que me permitirán saber más de lo que quieres 🤓\",\n                                        },\n                                        {\n                                          sender: \"user\",\n                                          options: [\n                                            {\n                                              message: {\n                                                sender: \"user\",\n                                                text: \"soy menor de edad 👼🏻\",\n                                              },\n                                              onClick: () => {\n                                                endPhase([0, 18]);\n                                              },\n                                            },\n                                            {\n                                              message: {\n                                                sender: \"user\",\n                                                text: \"soy menor de 25 💁🏻\",\n                                              },\n                                              onClick: () => {\n                                                endPhase([18, 25]);\n                                              },\n                                            },\n                                            {\n                                              message: {\n                                                sender: \"user\",\n                                                text: \"soy mayor de 25 👨🏻‍⚖️\",\n                                              },\n                                              onClick: () => {\n                                                endPhase([25, 99]);\n                                              },\n                                            },\n                                          ],\n                                        },\n                                      ],\n                                      500\n                                    ),\n                                  message: {\n                                    sender: \"user\",\n                                    text: \"Qué bueno saberlo 💖\",\n                                  },\n                                },\n                              ],\n                            },\n                          ],\n                          500\n                        ),\n                      message: {\n                        sender: \"user\",\n                        text: \"Suena genial!\",\n                      },\n                    },\n                  ],\n                },\n              ],\n              500\n            ),\n          message: {\n            sender: \"user\",\n            text: \"Okey, cuéntame más! 👀\",\n          },\n        },\n      ],\n    },\n  ];\n\n  addMessages(initialMessages, 50);\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport Conversation from \"./Components/Conversation\";\n// import VoiceRecorder from \"./Components/VoiceRecorder\";\n\nfunction App() {\n  return (\n    <div className='App'>\n      <Conversation />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}